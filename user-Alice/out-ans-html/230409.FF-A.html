
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="github.css" type="text/css">
    <title>230409.FF-A</title>    
  </head>
  <body>
    <article class="markdown-body">
        <!-- Markdown-generated HTML content here -->
        <h1>230409.FF-A</h1>
<p>Created: 2023-04-29 22:44:41</p>
<h1>Questions</h1>
<ul>
<li>Ch 2 - Introduction<ul>
<li>The below text are chapter 2 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo; <code>(FF-A.0409.md)</code></li>
<li>What is &ldquo;Arm A-profile&rdquo;? <code>(2023/4/11)</code> <code>(FF-A.0409.md)</code></li>
<li>Does &ldquo;Arm Firmware Framework for Arm A-profile&rdquo; document is only about Cortex-A? <code>(2023/4/11)</code> <code>(FF-A.0409.md)</code></li>
</ul>
</li>
<li>Ch 3 - Software Architecture<ul>
<li>The below text are chapter 3 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo; <code>(FF-A.0409.md)</code></li>
</ul>
</li>
<li>Ch 3.1 - Isolation boundaries<ul>
<li>The below text are chapter 3.1 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo;. Please summarize it. <code>(FF-A.0409.md)</code></li>
</ul>
</li>
<li>Ch 3.2 - Partitions<ul>
<li>The below text are chapter 3.2 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo;. Please summarize it. <code>(FF-A.0409.md)</code></li>
</ul>
</li>
<li>Ch 3.3 - Partition manager<ul>
<li>The below text are chapter 3.3 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo;. Please summarize it. <code>(FF-A.0409.md)</code></li>
<li>So SPM and Hypervisor are partition managers. Right? <code>(FF-A.0409.md)</code></li>
<li>What is VMSA? <code>(FF-A.0409.md)</code></li>
<li>Is VMSA a software or a hardware? <code>(FF-A.0409.md)</code></li>
</ul>
</li>
<li>Ch 3.4 Example configurations<ul>
<li>The below text are chapter 3.4 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo;. Please summarize it. <code>(FF-A.0409.md)</code></li>
<li>Can SPM see SP0 and SP1? <code>(FF-A.0409.md)</code></li>
<li>Can SP0 or SP1 see SPM? <code>(FF-A.0409.md)</code></li>
<li>Is TrustZone isolation boundary physical isolation or logical isolation? <code>(FF-A.0409.md)</code></li>
</ul>
</li>
<li>Ch 4.1 - SPM architecture<ul>
<li>The below text are chapter 4.1 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo;. Please summarize it. <code>(FF-A.0409.md)</code></li>
<li>What is SPMC in the document? <code>(FF-A.0409.md)</code></li>
<li>Is SPMC of TrustZone? <code>(FF-A.0409.md)</code></li>
</ul>
</li>
<li>FF-A, TF-A, and TrustZone<ul>
<li>What is TF-A? <code>(2023/4/10)</code> <code>(FF-A.0409.md)</code></li>
<li>Please draw the relationship among TrustZone, TF-A, and FF-A. <code>(2023/4/10)</code> <code>(FF-A.0409.md)</code></li>
<li>What is relationship between FF-A and TF-A? <code>(2023/4/10)</code> <code>(FF-A.0409.md)</code></li>
<li>Could I say that TF-A refers FF-A? <code>(2023/4/10)</code> <code>(FF-A.0409.md)</code></li>
<li>When to enable secondary cores? <code>(2023/4/11)</code> <code>(FF-A.0409.md)</code></li>
<li>Is TF-A persistent in memory at run-time? <code>(2023/4/12)</code> <code>(FF-A.0409.md)</code></li>
<li>What is SMCCC? <code>(2023/4/13)</code> <code>(FF-A.0409.md)</code></li>
<li>What is SPL? <code>(2023/4/13)</code> <code>(FF-A.0409.md)</code></li>
<li>What is fip.bin? <code>(2023/4/13)</code> <code>(FF-A.0409.md)</code></li>
</ul>
</li>
</ul>
<hr />
<h1>Q &amp; A</h1>
<h2>Ch 2 - Introduction</h2>
<p><strong>Question:</strong> The below text are chapter 2 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo; <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong> &hellip; &hellip;</p>
<hr />
<p><strong>Question:</strong> What is &ldquo;Arm A-profile&rdquo;? <code>(2023/4/11)</code> <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>The Arm A-profile is a family of Arm CPU architectures that are designed for high-performance and power-efficient applications, including mobile devices, consumer electronics, servers, and networking infrastructure. The A-profile CPUs are based on the Armv7-A and Armv8-A architectures, which support both 32-bit (AArch32) and 64-bit (AArch64) execution states. The A-profile processors provide a wide range of performance and power options to suit various use cases and include popular cores like Cortex-A series (e.g., Cortex-A72, Cortex-A57, Cortex-A53, etc.).</p>
<hr />
<p><strong>Question:</strong> Does &ldquo;Arm Firmware Framework for Arm A-profile&rdquo; document is only about Cortex-A? <code>(2023/4/11)</code> <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>The &ldquo;Arm Firmware Framework for Arm A-profile&rdquo; document is focused on the Arm A-profile architecture, which includes Cortex-A series processors. However, it is not limited to Cortex-A processors only. The document provides guidelines and specifications for developing firmware for Arm A-profile processors in general, including Cortex-A series processors and potentially other A-profile processors developed by Arm or its partners. It aims to ensure a consistent approach to firmware development, security, and functionality across different Arm A-profile implementations.</p>
<hr />
<h2>Ch 3 - Software Architecture</h2>
<p><strong>Question:</strong> The below text are chapter 3 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo; <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong> &hellip; &hellip;</p>
<hr />
<h2>Ch 3.1 - Isolation boundaries</h2>
<p><strong>Question:</strong> The below text are chapter 3.1 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo;. Please summarize it. <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong> &hellip; &hellip;</p>
<hr />
<h2>Ch 3.2 - Partitions</h2>
<p><strong>Question:</strong> The below text are chapter 3.2 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo;. Please summarize it. <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong> &hellip; &hellip;</p>
<hr />
<h2>Ch 3.3 - Partition manager</h2>
<p><strong>Question:</strong> The below text are chapter 3.3 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo;. Please summarize it. <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong> &hellip; &hellip;</p>
<hr />
<p><strong>Question:</strong> So SPM and Hypervisor are partition managers. Right? <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>Yes, that&rsquo;s correct. In the context of the Arm Firmware Framework for Arm A-profile, the Secure Partition Manager (SPM) operates in the Secure world, while the Hypervisor operates in the Normal world. Both SPM and Hypervisor are partition managers responsible for creating and managing the physical isolation boundaries of partitions, assigning resources, and enabling inter-partition communication.</p>
<hr />
<p><strong>Question:</strong> What is VMSA? <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>VMSA, or Virtual Memory System Architecture, is a part of the Arm architecture that defines the memory management and address translation mechanisms. It is responsible for managing the address spaces and memory protection features in Arm systems. VMSA allows for the creation of separate virtual address spaces for each process, providing isolation between processes and the operating system. In the context of the Arm A-profile, the Hypervisor uses the virtualization extension in VMSA to create physical isolation boundaries between different partitions or virtual machines.</p>
<hr />
<p><strong>Question:</strong> Is VMSA a software or a hardware? <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>VMSA (Virtual Memory System Architecture) is not a specific piece of software or hardware, but rather a part of the Arm architecture specification that defines how memory management and address translation should be implemented in Arm-based systems. VMSA provides guidelines for designing hardware and software components that handle memory management, address translation, and access control, allowing for the creation of separate virtual address spaces and ensuring proper isolation between processes and the operating system.</p>
<hr />
<h2>Ch 3.4 Example configurations</h2>
<p><strong>Question:</strong> The below text are chapter 3.4 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo;. Please summarize it. <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong> &hellip; &hellip;</p>
<hr />
<p><strong>Question:</strong> Can SPM see SP0 and SP1? <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>Yes, the Secure Partition Manager (SPM) can &ldquo;see&rdquo; and manage both SP0 and SP1. The SPM is responsible for creating and managing the physical isolation boundaries of Secure Partitions (SPs) like SP0 and SP1. It uses partition manifests to assign resources, initialize the partitions, and enable discovery of their services. Additionally, the SPM implements FF-A ABIs (Application Binary Interfaces) to enable inter-partition communication for access to partition services. So, while the SPM isolates SP0 and SP1 from each other, it still has visibility and control over both partitions.</p>
<hr />
<p><strong>Question:</strong> Can SP0 or SP1 see SPM? <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>In the ARM Firmware Framework, SP0 and SP1 can communicate with the Secure Partition Manager (SPM) through well-defined interfaces, such as FF-A ABIs (Application Binary Interfaces). While the SPM is physically isolated from SP0 and SP1 in scenarios where they are physical partitions, they can still interact with the SPM using these interfaces for communication, service discovery, and memory management.</p>
<p>However, it is important to note that SP0 and SP1 cannot access the internal workings or the memory of the SPM directly. They can only communicate with the SPM through the defined interfaces, ensuring that the isolation between them is maintained.</p>
<hr />
<p><strong>Question:</strong> Is TrustZone isolation boundary physical isolation or logical isolation? <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>TrustZone isolation boundary is a form of physical isolation. TrustZone is a security extension in ARM architecture that separates the processor&rsquo;s resources, such as memory and peripherals, into two distinct security domains: the Secure world and the Non-secure world. By utilizing hardware-based isolation, TrustZone ensures that sensitive data and functions in the Secure world are protected from unauthorized access by software running in the Non-secure world.</p>
<hr />
<h2>Ch 4.1 - SPM architecture</h2>
<p><strong>Question:</strong> The below text are chapter 4.1 of &ldquo;Arm Firmware Framework for Arm A-profile&rdquo;. Please summarize it. <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong> &hellip; &hellip;</p>
<hr />
<p><strong>Question:</strong> What is SPMC in the document? <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>In the document &ldquo;Arm Firmware Framework for Arm A-profile,&rdquo; the SPMC (Secure Partition Manager Core) is a component of the Secure Partition Manager (SPM) responsible for:</p>
<ol>
<li>Initializing and isolating Secure Partitions (SPs) at boot time.</li>
<li>Ensuring inter-partition isolation during runtime.</li>
<li>Managing inter-partition communication between Secure Endpoints (S-Endpoints) and Non-Secure Endpoints (NS-Endpoints).</li>
</ol>
<p>The SPMC can co-reside with the SPM Dispatcher (SPMD) in EL3 or reside in adjacent exception levels, such as S-EL1 or S-EL2. It is a part of the Trusted Computing Base and has access to the entire physical address space.</p>
<hr />
<p><strong>Question:</strong> Is SPMC of TrustZone? <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>The SPMC (Secure Partition Manager Core) is part of the Arm Firmware Framework for Arm A-profile, which is built on top of the Arm TrustZone technology. TrustZone provides the underlying hardware support for isolation and security, while the SPMC is responsible for managing partitions and their communication within the Secure world enabled by TrustZone. So, while the SPMC is not TrustZone itself, it is a component that utilizes and operates within the TrustZone technology.</p>
<hr />
<h2>FF-A, TF-A, and TrustZone</h2>
<p><strong>Question:</strong> What is TF-A? <code>(2023/4/10)</code> <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>TF-A, or Trusted Firmware-A, is a reference implementation of secure world software for Arm A-profile processors. It provides a platform for implementing security features and building trusted execution environments in devices that use Armv8-A processors, such as smartphones, tablets, and other embedded systems.</p>
<p>TF-A includes implementations of various Arm security technologies, such as Secure Boot, Secure Monitor (for switching between secure and non-secure worlds), and runtime services. The project is open-source, allowing developers to use and modify the code to develop secure firmware solutions that meet the requirements of their specific applications.</p>
<hr />
<p><strong>Question:</strong> Please draw the relationship among TrustZone, TF-A, and FF-A. <code>(2023/4/10)</code> <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>TrustZone, TF-A, and FF-A are technologies and frameworks related to the security aspects of Arm-based systems. Here&rsquo;s a simple representation of their relationships:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">+-----------------+</span><span class="c"></span>
<span class="c">|   TrustZone     |</span>
<span class="c">|  (Technology)   |</span>
<span class="c">| </span><span class="nb">+-------------+</span><span class="c"> |</span>
<span class="c">| |    TF</span><span class="nb">-</span><span class="c">A     | |</span>
<span class="c">| | (Firmware)  | |</span>
<span class="c">| </span><span class="nb">+-------------+</span><span class="c"> |</span>
<span class="c">| </span><span class="nb">+-------------+</span><span class="c"> |</span>
<span class="c">| |    FF</span><span class="nb">-</span><span class="c">A     | |</span>
<span class="c">| |  (Framework)| |</span>
<span class="c">| </span><span class="nb">+-------------+</span><span class="c"> |</span>
<span class="nb">+-----------------+</span><span class="c"></span>
</code></pre></div>

<ol>
<li>
<p>TrustZone is a hardware-based security technology built into Arm processors. It provides a secure execution environment by creating two separate worlds: a Secure World and a Non-secure World. TrustZone ensures that the Secure World&rsquo;s data and code are protected from unauthorized access.</p>
</li>
<li>
<p>Trusted Firmware-A (TF-A) is an open-source reference implementation of secure world software for Arm A-profile processors. It leverages TrustZone technology and provides secure boot, runtime services, and a secure monitor for switching between the secure and non-secure worlds.</p>
</li>
<li>
<p>Firmware Framework for Armv8-A (FF-A) is a software architecture specification that aims to standardize the way partitions, services, and communication are managed in Arm A-profile systems. It defines the interactions between the Secure Partition Manager (SPM), partitions, and the Non-secure world. FF-A can be used in conjunction with TrustZone and TF-A to build a complete secure software solution.</p>
</li>
</ol>
<hr />
<p><strong>Question:</strong> What is relationship between FF-A and TF-A? <code>(2023/4/10)</code> <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>The relationship between FF-A (Firmware Framework for Armv8-A) and TF-A (Trusted Firmware-A) is that FF-A provides a standardized software architecture specification for managing partitions, services, and communication on Arm A-profile systems, while TF-A is an open-source reference implementation of secure world software that leverages TrustZone technology.</p>
<p>TF-A can be used as a base for implementing the secure world software stack on Arm A-profile systems, and it can be extended or adapted to conform to the FF-A architecture. By aligning the TF-A implementation with the FF-A specification, developers can achieve a more modular, maintainable, and interoperable software stack that can better address the needs of secure systems.</p>
<p>In summary, the relationship between FF-A and TF-A is complementary, with FF-A providing the architectural guidelines, and TF-A serving as a reference implementation that can be tailored to adhere to those guidelines.</p>
<hr />
<p><strong>Question:</strong> Could I say that TF-A refers FF-A? <code>(2023/4/10)</code> <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>Yes, you can say that TF-A refers to FF-A, as TF-A can be extended or adapted to conform to the FF-A architecture. The FF-A provides the architectural guidelines for secure systems, while TF-A serves as a reference implementation that can be tailored to adhere to those guidelines. By aligning the TF-A implementation with the FF-A specification, developers can achieve a more modular, maintainable, and interoperable software stack for secure systems.</p>
<hr />
<p><strong>Question:</strong> When to enable secondary cores? <code>(2023/4/11)</code> <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>Secondary cores are typically enabled after the primary core has successfully initialized the system and started the operating system. The exact process for enabling secondary cores can vary depending on the hardware and operating system being used. Here is a general outline of when secondary cores are enabled:</p>
<ol>
<li>
<p>Power on the system, and the primary core initializes hardware components and executes the bootloader (e.g., Trusted Firmware-A for Arm-based systems).</p>
</li>
<li>
<p>The bootloader loads and starts the operating system on the primary core.</p>
</li>
<li>
<p>The operating system initializes its kernel, essential components, and device drivers on the primary core.</p>
</li>
<li>
<p>After the primary core has completed its initialization, the operating system enables the secondary cores. This process is often referred to as &ldquo;core bring-up&rdquo; or &ldquo;CPU hotplug.&rdquo;</p>
</li>
<li>
<p>The operating system assigns tasks or processes to the secondary cores, allowing them to participate in executing applications and system processes.</p>
</li>
</ol>
<p>It is important to note that the specific process for enabling secondary cores depends on the hardware platform, firmware, bootloader, and operating system in use. Some systems may require additional configuration or software support to enable secondary cores.</p>
<hr />
<p><strong>Question:</strong> Is TF-A persistent in memory at run-time? <code>(2023/4/12)</code> <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>Yes, the Trusted Firmware-A (TF-A) is typically persistent in memory at run-time. It resides in the secure memory region and provides various services, such as Secure Monitor Call (SMC) handling, Power State Coordination Interface (PSCI) implementation, and other platform-specific services. Since it acts as a secure monitor, it must remain present in memory during the system&rsquo;s operation to handle any secure world requests or transitions between secure and non-secure worlds.</p>
<hr />
<p><strong>Question:</strong> What is SMCCC? <code>(2023/4/13)</code> <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>The SMCCC (Secure Monitor Call Calling Convention) is a standardized calling convention for ARM-based systems, which defines how Secure Monitor Calls (SMCs) are used to request services from a secure monitor, such as Trusted Firmware-A (TF-A). SMCCC provides a consistent interface for communication between the non-secure world (e.g., an operating system) and the secure world (e.g., a trusted execution environment or firmware). This standardized interface allows for better interoperability between different software components and platforms in ARM-based systems.</p>
<hr />
<p><strong>Question:</strong> What is SPL? <code>(2023/4/13)</code> <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p>SPL (Secondary Program Loader) is a term used in the context of embedded systems and bootloaders. It is a small, lightweight bootloader that runs before the primary bootloader and is responsible for initializing essential hardware components, such as clocks, memory, and peripherals. After performing the required initialization, the SPL loads the primary bootloader (e.g., U-Boot) into memory and transfers control to it, allowing the primary bootloader to continue the boot process and eventually load the operating system. The use of an SPL can help improve boot time, reduce the complexity of the primary bootloader, and provide a uniform interface for different hardware platforms.</p>
<hr />
<p><strong>Question:</strong> What is fip.bin? <code>(2023/4/13)</code> <code>(FF-A.0409.md)</code></p>
<p><strong>Answer:</strong></p>
<p><code>fip.bin</code> (Firmware Image Package) is a binary file used in Arm Trusted Firmware-A (TF-A) for packing multiple firmware images into a single file. It is used as a part of the boot process in Arm-based systems, particularly in the context of Armv8-A architecture.</p>
<p>The <code>fip.bin</code> file typically contains a collection of firmware images, such as:</p>
<ol>
<li>BL1 (First Level Bootloader): Responsible for initial platform setup and loading BL2.</li>
<li>BL2 (Second Level Bootloader): Responsible for loading BL3x images.</li>
<li>BL3-1 (EL3 Runtime Firmware): Provides runtime services, such as PSCI (Power State Coordination Interface), to the lower ELs (Exception Levels).</li>
<li>BL3-2 (Trusted OS Firmware): The Secure-EL1 Payload, typically the TrustZone-based OS or a secure monitor.</li>
<li>BL3-3 (Non-Trusted Firmware): The Non-secure-EL1 Payload, usually the main OS bootloader like U-Boot or GRUB.</li>
</ol>
<p>The <code>fip.bin</code> file is created using the <code>fiptool</code> utility provided by Arm Trusted Firmware. The tool combines the various firmware images into a single binary, which can then be loaded and executed by the platform&rsquo;s bootloader during the boot process. This approach simplifies firmware management and distribution while also enabling the bootloader to locate and authenticate the required images more easily.</p>
<hr />
    </article>
  </body>
</html>
